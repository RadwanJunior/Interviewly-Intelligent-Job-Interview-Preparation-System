(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(5155),n=a(2115),s=a(9708),i=a(2085),o=a(9434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:d=!1,...c}=e,u=d?s.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:a})),ref:t,...c})});d.displayName="Button"},968:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var r=a(2115),n=a(3655),s=a(5155),i=r.forwardRef((e,t)=>(0,s.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(5155),n=a(2115),s=a(9434);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},3246:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5155),n=a(2115),s=a(5695),i=a(8126),o=a.n(i),l=a(285),d=a(2523),c=a(5057),u=a(7481),f=a(5731),p=a(3464);let m=()=>{let[e,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),{toast:v}=(0,u.dj)(),g=(0,s.useRouter)();(0,n.useEffect)(()=>{i(e)},[e]);let x=async()=>{try{let e=await f.FH.get("/auth/profile");t(e.data)}catch(a){var e;console.error("fetchProfile error:",a),p.A.isAxiosError(a)&&(null===(e=a.response)||void 0===e?void 0:e.status)===401?(v({title:"Please log in",description:"You need to be logged in to view your profile.",variant:"destructive"}),t(null),setTimeout(()=>{g.push("/auth/login")},100)):v({title:"Error",description:a instanceof Error?a.message:"Failed to fetch profile",variant:"destructive"})}};(0,n.useEffect)(()=>{x()},[]);let y=async()=>{try{await (0,f.ri)(),t(null),g.push("/auth/login")}catch(e){v({title:"Error",description:e instanceof Error?e.message:"Failed to logout",variant:"destructive"})}},b=async()=>{try{if(!a||!e)return;await f.FH.put("/auth/profile",{first_name:a.first_name,last_name:a.last_name});let r={...e,first_name:a.first_name,last_name:a.last_name,updated_at:new Date().toISOString()};t(r),i(r),h(!1),v({title:"Profile updated",description:"Your changes have been saved."})}catch(e){v({title:"Error",description:e instanceof Error?e.message:"Failed to update profile",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-white via-secondary/10 to-white",children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"My Profile - Interviewly"})}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-32",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8 animate-fade-up",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-heading font-bold text-foreground",children:"My Profile"}),m?(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>{e&&i(e),h(!1)},children:"Cancel"}),(0,r.jsx)(l.$,{onClick:b,children:"Save Changes"})]}):(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>h(!0),children:"Edit Profile"}),(0,r.jsx)(l.$,{variant:"destructive",className:"border border-red-500 bg-red-50 text-red-700 hover:bg-red-100",onClick:y,children:"Log out"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,r.jsx)("div",{className:"md:w-1/3",children:(0,r.jsx)("div",{className:"aspect-square rounded-lg bg-secondary/50 flex items-center justify-center overflow-hidden",children:(0,r.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/1077/1077012.png",alt:"Profile",className:"object-cover w-full h-full"})})}),(0,r.jsxs)("div",{className:"md:w-2/3 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"first_name",children:"First Name"}),(0,r.jsx)(d.p,{id:"first_name",type:"text",value:(null==a?void 0:a.first_name)||"",readOnly:!m,onChange:e=>i(t=>t?{...t,first_name:e.target.value}:t),tabIndex:m?0:-1,className:"".concat(m?"":"bg-secondary/20 pointer-events-none")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"last_name",children:"Last Name"}),(0,r.jsx)(d.p,{id:"last_name",type:"text",value:(null==a?void 0:a.last_name)||"",readOnly:!m,onChange:e=>i(t=>t?{...t,last_name:e.target.value}:t),tabIndex:m?0:-1,className:"".concat(m?"":"bg-secondary/20 pointer-events-none")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(d.p,{id:"email",type:"email",value:(null==a?void 0:a.email)||"",readOnly:!0,tabIndex:-1,className:"bg-secondary/20 pointer-events-none"})]}),(0,r.jsxs)("div",{className:"pt-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Account Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Member since:"}),(0,r.jsx)("span",{children:e?new Date(e.created_at).toLocaleDateString():"..."}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"Last update:"}),(0,r.jsx)("span",{children:e?new Date(e.updated_at).toLocaleDateString():"..."})]})]})]})]})]})})]})}},3655:(e,t,a)=>{"use strict";a.d(t,{hO:()=>l,sG:()=>o});var r=a(2115),n=a(7650),s=a(9708),i=a(5155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let a=r.forwardRef((e,a)=>{let{asChild:r,...n}=e,o=r?s.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...n,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function l(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var r=a(5155),n=a(2115),s=a(968),i=a(2085),o=a(9434);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.b,{ref:t,className:(0,o.cn)(l(),a),...n})});d.displayName=s.b.displayName},5731:(e,t,a)=>{"use strict";a.d(t,{$5:()=>s,Be:()=>o,EA:()=>f,FH:()=>n,I$:()=>y,Ij:()=>p,Kh:()=>w,Qp:()=>c,Uw:()=>g,ZJ:()=>u,Zr:()=>h,at:()=>v,e4:()=>x,iD:()=>i,my:()=>m,ri:()=>l,s4:()=>b,x5:()=>d});var r=a(3464);let n=r.A.create({baseURL:"http://localhost:8000",withCredentials:!0,headers:{"Content-Type":"application/json"}});async function s(e,t,a,r){return(await n.post("/auth/signup",{firstName:e,lastName:t,email:a,password:r})).data}async function i(e,t){return(await n.post("/auth/login",{email:e,password:t})).data}async function o(){try{return(await n.post("/auth/refresh",{},{withCredentials:!0})).data}catch(t){if(r.A.isAxiosError(t)){var e;console.error("Error refreshing token:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message)}else console.error("Error refreshing token:",t.message);throw t}}async function l(){await n.post("/auth/logout")}async function d(e){let t=new FormData;return t.append("file",e),(await n.post("/resumes/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data}async function c(){return(await n.get("/resumes/")).data}async function u(e){return(await n.put("/resumes/",{updated_text:e})).data}async function f(e,t,a,r,s){return(await n.post("/job_description",{job_title:e,company_name:t,location:a,job_type:r,description:s})).data}async function p(e){return(await n.post("/interview/create",e)).data}async function m(e){return(await n.get("/interview/status/".concat(e))).data}async function h(e){return(await n.get("/interview/questions/".concat(e))).data}async function v(e){let{file:t,interview_id:a,question_id:r,question_text:s,question_order:i,is_last_question:o=!1,mime_type:l="audio/webm"}=e,d=new FormData;return d.append("file",t),d.append("interview_id",a),d.append("question_id",r),d.append("question_text",s),d.append("question_order",String(i)),d.append("is_last_question",String(o)),d.append("mime_type",l),(await n.post("/audio/upload",d,{headers:{"Content-Type":"multipart/form-data"}})).data}async function g(e){return(await n.get("/audio/status/".concat(e))).data}async function x(e){return(await n.get("/audio/feedback/".concat(e))).data}async function y(){return(await n.get("/dashboard/stats")).data}async function b(){return(await n.get("/dashboard/history")).data}async function w(){try{let e=await n.get("/dashboard/active-plan");if(404===e.status)return null;return e.data}catch(t){var e;if(r.A.isAxiosError(t)&&(null===(e=t.response)||void 0===e?void 0:e.status)===404)return null;return console.error("Error fetching active plan:",t),null}}console.log("API base URL:",n.defaults.baseURL)},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var r=a(2115);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8126:(e,t)=>{"use strict";function a(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9086:(e,t,a)=>{Promise.resolve().then(a.bind(a,3246))},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(2596),n=a(9688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,352,441,684,358],()=>t(9086)),_N_E=e.O()}]);